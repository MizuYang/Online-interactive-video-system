"use strict";(self["webpackChunkvue_template"]=self["webpackChunkvue_template"]||[]).push([[171],{8877:function(t,e,s){s.d(e,{Z:function(){return d}});var i=s(3396),o=s(9242);function n(t,e,s,n,r,a){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("a",{href:"javascript:;",class:"changeSizeBtn top",onMousedown:e[0]||(e[0]=(0,o.iM)((t=>a.dragChangeSize(t,s.index)),["prevent","stop"]))},null,32),(0,i._)("a",{href:"javascript:;",class:"changeSizeBtn left",onMousedown:e[1]||(e[1]=(0,o.iM)((t=>a.dragChangeSize(t,s.index)),["prevent","stop"]))},null,32),(0,i._)("a",{href:"javascript:;",class:"changeSizeBtn right",onMousedown:e[2]||(e[2]=(0,o.iM)((t=>a.dragChangeSize(t,s.index)),["prevent","stop"]))},null,32),(0,i._)("a",{href:"javascript:;",class:"changeSizeBtn bottom",onMousedown:e[3]||(e[3]=(0,o.iM)((t=>a.dragChangeSize(t,s.index)),["prevent","stop"]))},null,32)],64)}var r=s(7139),a={props:["dropWrap","index"],data(){return{questionsList:[]}},computed:{...(0,r.rn)(["questionsList2"])},methods:{...(0,r.OI)(["SAVE_QUESTIONS_LIST"]),dragChangeSize(t,e){const s=this,i=this.$parent.$refs[`dropItem${e}`][0],o={left:this.dropWrap.offsetLeft,right:this.dropWrap.offsetLeft+this.dropWrap.offsetWidth-i.offsetWidth,top:this.dropWrap.offsetTop,bottom:this.dropWrap.offsetTop+this.dropWrap.offsetHeight-i.offsetHeight};let n="";const r=t.clientX,a=t.clientY,u=i.offsetWidth,p=i.offsetHeight,d=i.offsetLeft,h=i.offsetTop;r>d+u-10?n="right":r<d+10&&(n="left"),a>h+p-10?n="bottom":a<h+10&&(n="top"),document.onmousemove=function(t){"left"===n?t.clientX<r&&t.clientX>=o[n]&&(s.questionsList[e].width=u-(t.clientX-r),s.questionsList[e].x=d+(t.clientX-r),i.style.width=u-(t.clientX-r),i.style.left=d+(t.clientX-r)):"right"===n?o[n]>=d+(t.clientX-r)&&(s.questionsList[e].width=u+(t.clientX-r),i.style.width=u+(t.clientX-r)):"top"===n?t.clientY<a&&t.clientY>=o[n]&&(s.questionsList[e].height=p-(t.clientY-a),s.questionsList[e].y=h+(t.clientY-a),i.style.height=p-(t.clientY-a),i.style.top=h+(t.clientY-a)):"bottom"===n&&o[n]>=h+(t.clientY-a)&&(s.questionsList[e].height=p+(t.clientY-a),i.style.height=p+(t.clientY-a))},this.$store.commit("SAVE_QUESTIONS_LIST",{questionsList:this.questionsList}),document.onmouseup=function(){document.onmousemove=null}}},mounted(){this.questionsList=this.questionsList2}},u=s(89);const p=(0,u.Z)(a,[["render",n]]);var d=p},4100:function(t,e,s){s.d(e,{Z:function(){return Q}});var i=s(3396),o=s(2268),n=s(9242);const r=["onMousedown","data-question-id"],a={class:"d-flex justify-content-between"},u={class:"text-center"},p={key:0},d=["onClick"],h={class:"text-start mb-0"},l=(0,i.Uk)(" 標題 "),c=["onClick","disabled"],m=["onClick"],f=(0,i.Uk)(" 權重："),y=["onUpdate:modelValue"],L=(0,i._)("p",{class:"text-start mb-0"},"內容",-1),g=["onUpdate:modelValue"],v=(0,i._)("p",{class:"text-start mb-0"},"答案",-1),q=["onUpdate:modelValue"],T={key:0};function I(t,e,s,I,S,_){const x=(0,i.up)("DropBtn");return(0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.questionsList2,((e,I)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:`questionItem${I}`,class:(0,o.C_)(["bg-info text-center px-3 py-3",{drop:_.isTeacherQuePage,"drop-style":_.isTeacherQuePage,poa:"/examStart"===t.$route.path||"/youtubeVideo"===t.$route.path}]),onMousedown:t=>_.dragStart(t,`dropItem${I}`),"data-question-id":e.id,ref_for:!0,ref:`dropItem${I}`,style:(0,o.j5)({left:`${_.noTeacherQuePageLoseX(e.x)}px`,top:`${_.noTeacherQuePageLoseY(e.y)}px`,width:`${e.width}px`,height:`${e.height}px`})},[(0,i._)("div",a,[(0,i._)("h3",u,"第"+(0,o.zw)(I+1)+"題",1),_.isTeacherQuePage?((0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("button",{type:"button",class:"btn btn-danger btn-sm ms-3 d-inline-block",onClick:t=>_.deleteQuestion(e.id)},"X",8,d)])):(0,i.kq)("",!0)]),(0,i._)("div",h,[l,_.isTeacherQuePage?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("button",{type:"button",onClick:t=>_.loseIndex(I),disabled:!t.questionsList2[I].zIndex||t.questionsList2[I].zIndex<=0},"－",8,c),(0,i._)("button",{type:"button",onClick:t=>_.addIndex(I)},"＋",8,m),f,(0,i._)("span",{ref_for:!0,ref:`zIndexNum${I}`},"0",512)],64)):(0,i.kq)("",!0)]),(0,i.wy)((0,i._)("input",{type:"text",class:(0,o.C_)({"drop-style":_.isTeacherQuePage}),"onUpdate:modelValue":e=>t.questionsList2[I].title=e},null,10,y),[[n.nr,t.questionsList2[I].title,void 0,{lazy:!0}]]),L,(0,i.wy)((0,i._)("input",{type:"text",class:(0,o.C_)({"drop-style":_.isTeacherQuePage}),"onUpdate:modelValue":e=>t.questionsList2[I].content=e},null,10,g),[[n.nr,t.questionsList2[I].content,void 0,{lazy:!0}]]),v,(0,i.wy)((0,i._)("input",{type:"text",class:(0,o.C_)({"drop-style":_.isTeacherQuePage}),"onUpdate:modelValue":e=>t.questionsList2[I].answer=e},null,10,q),[[n.nr,t.questionsList2[I].answer,void 0,{lazy:!0}]]),_.isTeacherQuePage?((0,i.wg)(),(0,i.iD)("div",T,[(0,i.Wm)(x,{dropWrap:s.dropWrap,index:I},null,8,["dropWrap","index"])])):(0,i.kq)("",!0)],46,r)),[[n.F8,Math.floor(s.videoTime)>=e.showTime&&Math.floor(s.videoTime)<=e.showTime+1]]))),128)}var S=s(7139),_=s(8877),x={props:["dropWrap","videoTime"],components:{DropBtn:_.Z},data(){return{questionsList:[],currentPage:""}},computed:{...(0,S.rn)(["questionsList2","plyr"]),isTeacherQuePage(){return"/teacherQuestions"===this.$route.path||"/queGroup"===this.$route.path}},watch:{questionsList2(){this.questionsList=this.questionsList2}},methods:{...(0,S.OI)(["SAVE_QUESTIONS_LIST"]),dragStart(t,e){"A"!==t.target.nodeName&&"BUTTON"!==t.target.nodeName&&this.isTeacherQuePage&&(this.currentDropItem=this.$refs[e][0],this.startX=t.clientX-this.currentDropItem.offsetLeft,this.startY=t.clientY-this.currentDropItem.offsetTop,document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.stop))},move(t){this.x=t.clientX-this.startX,this.y=t.clientY-this.startY;const e={left:this.dropWrap.offsetLeft,right:this.dropWrap.offsetLeft+this.dropWrap.offsetWidth-this.currentDropItem.offsetWidth,top:this.dropWrap.offsetTop,bottom:this.dropWrap.offsetTop+this.dropWrap.offsetHeight-this.currentDropItem.offsetHeight};this.x=Math.max(Math.min(this.x,e.right),e.left),this.y=Math.max(Math.min(this.y,e.bottom),e.top);const s=this.currentDropItem.getAttribute("data-question-id"),i=this.questionsList.findIndex((t=>t.id===s));this.questionsList[i].x=this.x,this.questionsList[i].y=this.y,this.$store.commit("SAVE_QUESTIONS_LIST",{questionsList:this.questionsList})},stop(){document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.stop)},deleteQuestion(t){const e=this.questionsList.findIndex((e=>e.id===t));this.questionsList.splice(e,1),this.$getMarker(),this.$store.commit("SAVE_QUESTIONS_LIST",{questionsList:this.questionsList})},addIndex(t){this.$refs[`dropItem${t}`][0].style.zIndex++,this.$refs[`zIndexNum${t}`][0].textContent=this.$refs[`dropItem${t}`][0].style.zIndex,this.questionsList[t].zIndex=this.$refs[`dropItem${t}`][0].style.zIndex,this.$store.commit("SAVE_QUESTIONS_LIST",{questionsList:this.questionsList})},loseIndex(t){this.$refs[`dropItem${t}`][0].style.zIndex--,this.$refs[`zIndexNum${t}`][0].textContent=this.$refs[`dropItem${t}`][0].style.zIndex,this.questionsList[t].zIndex=this.$refs[`dropItem${t}`][0].style.zIndex,this.$store.commit("SAVE_QUESTIONS_LIST",{questionsList:this.questionsList})},noTeacherQuePageLoseX(t){if(this.isTeacherQuePage)return t;{const e=t-this.dropWrap.offsetLeft;return e}},noTeacherQuePageLoseY(t){if(this.isTeacherQuePage)return t;{const e=t-this.dropWrap.offsetTop-12;return e}}},mounted(){this.questionsList=this.questionsList2}},$=s(89);const w=(0,$.Z)(x,[["render",I]]);var Q=w},4965:function(t,e,s){s.d(e,{Z:function(){return f}});var i=s(3396),o=s(4860);const n=["autoplay"],r=(0,i._)("source",{size:"720",src:o,type:"video/mp4"},null,-1),a=(0,i._)("source",{size:"1080",src:o,type:"video/mp4"},null,-1),u=(0,i._)("track",{default:"",kind:"captions",label:"English captions",src:"../../../assets/video/有聲影片測試.mp4",srclang:"en"},null,-1),p=[r,a,u];function d(t,e,s,o,r,a){const u=(0,i.up)("vue-plyr");return(0,i.wg)(),(0,i.j4)(u,{ref:"plyr"},{default:(0,i.w5)((()=>[(0,i._)("video",{autoplay:!0===t.options.autoplay,controls:"",crossorigin:"",playsinline:"","data-poster":"poster.jpg"},p,8,n)])),_:1},512)}var h=s(7139),l={computed:{...(0,h.rn)(["options"])},methods:{...(0,h.OI)(["PLAYER"])},mounted(){this.$store.commit("PLAYER_INIT",{player:this.$refs.plyr.player})}},c=s(89);const m=(0,c.Z)(l,[["render",d]]);var f=m},1171:function(t,e,s){s.r(e),s.d(e,{default:function(){return L}});var i=s(3396),o=s(9242);const n={class:"container my-5"},r={class:"my-4"},a=(0,i._)("h2",null,"教師出題",-1),u=(0,i._)("label",{for:"autoplay"},"自動播放",-1),p={class:"my-3"};function d(t,e,s,d,h,l){const c=(0,i.up)("VideoPlyr"),m=(0,i.up)("QuestionsList");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",r,[a,(0,i._)("button",{type:"button",onClick:e[0]||(e[0]=(...t)=>l.addQuestions&&l.addQuestions(...t))},"新增題目"),(0,i.wy)((0,i._)("input",{type:"checkbox",class:"ms-3",id:"autoplay","onUpdate:modelValue":e[1]||(e[1]=e=>t.options.autoplay=e),onChange:e[2]||(e[2]=(...t)=>l.setAutoplay&&l.setAutoplay(...t))},null,544),[[o.e8,t.options.autoplay]]),u]),(0,i._)("div",{class:"w-75",onClick:e[3]||(e[3]=(...e)=>t.$goVideoMarkerPosition&&t.$goVideoMarkerPosition(...e)),ref:"dropWrap"},[(0,i.Wm)(c),(0,i.Wm)(m,{dropWrap:h.dropWrap,videoTime:h.videoTime},null,8,["dropWrap","videoTime"])],512),(0,i._)("div",p,[h.questionsList.length>0?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",onClick:e[4]||(e[4]=(...t)=>l.confirmQuestions&&l.confirmQuestions(...t))},"確認出題")):(0,i.kq)("",!0)])])}var h=s(7139),l=s(4965),c=s(4100),m={components:{VideoPlyr:l.Z,QuestionsList:c.Z},data(){return{videoTime:0,lastTime:0,vidStopDisabled:!1,vidBorder:{},startX:"",startY:"",x:"",y:"",dropWrap:"",currentDropItem:"",questionsList:[]}},computed:{...(0,h.rn)(["questionsList2","plyr","options"])},watch:{questionsList:{handler(){this.$hoverMarkerTips()},deep:!0}},methods:{...(0,h.OI)(["SAVE_QUESTIONS_LIST","SAVE_OPTIONS"]),addQuestions(){this.player.pause(),this.questionsList.push({id:this.randomString(),showTime:Math.floor(this.videoTime),x:this.dropWrap.offsetLeft,y:this.dropWrap.offsetTop,width:248,height:234}),this.vidStopDisabled=!0,this.$getMarker(),this.$store.commit("SAVE_QUESTIONS_LIST",{questionsList:this.questionsList})},randomString(){const t=10,e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",s=e.length;let i="";for(let o=0;o<t;o++)i+=e.charAt(Math.floor(Math.random()*s));return i},setAutoplay(){localStorage.setItem("vid-autoplay",this.options.autoplay),this.options.autoplay&&this.player.play()},confirmQuestions(){this.$store.commit("SAVE_QUESTIONS_LIST",{questionsList:this.questionsList}),this.$store.commit("SAVE_OPTIONS",{options:this.options}),console.log("題目：",this.questionsList),console.log("配置項目",this.options)}},mounted(){this.player=this.plyr,this.dropWrap=this.$refs.dropWrap,this.questionsList2.length>0&&(this.questionsList=this.questionsList2,this.$getMarker()),this.player.config.invertTime=!1,this.player.on("timeupdate",(t=>{this.videoTime=this.player.currentTime,this.$questionShowVidStop()}))}},f=s(89);const y=(0,f.Z)(m,[["render",d]]);var L=y},4860:function(t,e,s){t.exports=s.p+"media/有聲影片測試.2f7692a8.mp4"}}]);
//# sourceMappingURL=171.01c73e55.js.map